<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>NATPAC Travel Survey Mobile App - SIH 2025 Demo</title>\n    <script src=\"https://unpkg.com/axios/dist/axios.min.js\"></script>\n    <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap\" rel=\"stylesheet\">\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css\" rel=\"stylesheet\">\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            font-family: 'Inter', sans-serif;\n            background: #f5f5f5;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            min-height: 100vh;\n            padding: 2rem;\n        }\n\n        .phone-container {\n            width: 375px;\n            height: 667px;\n            background: #000;\n            border-radius: 30px;\n            padding: 10px;\n            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n            position: relative;\n        }\n\n        .phone-screen {\n            width: 100%;\n            height: 100%;\n            background: #fff;\n            border-radius: 20px;\n            overflow: hidden;\n            position: relative;\n        }\n\n        .status-bar {\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            color: white;\n            padding: 10px 20px;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            font-size: 14px;\n            font-weight: 500;\n        }\n\n        .app-content {\n            padding: 20px;\n            height: calc(100% - 60px);\n            overflow-y: auto;\n        }\n\n        .logo-section {\n            text-align: center;\n            margin-bottom: 30px;\n        }\n\n        .logo-section i {\n            font-size: 3rem;\n            color: #667eea;\n            margin-bottom: 10px;\n        }\n\n        .logo-section h1 {\n            font-size: 1.5rem;\n            color: #333;\n            margin-bottom: 5px;\n        }\n\n        .logo-section p {\n            font-size: 0.9rem;\n            color: #666;\n        }\n\n        .trip-card {\n            background: rgba(102, 126, 234, 0.1);\n            border-radius: 15px;\n            padding: 20px;\n            margin-bottom: 20px;\n            border: 1px solid rgba(102, 126, 234, 0.2);\n        }\n\n        .trip-status {\n            text-align: center;\n            margin-bottom: 20px;\n        }\n\n        .status-indicator {\n            width: 80px;\n            height: 80px;\n            border-radius: 40px;\n            margin: 0 auto 15px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-size: 2rem;\n            transition: all 0.3s ease;\n        }\n\n        .status-indicator.ready {\n            background: #e8f5e8;\n            color: #2e7d2e;\n            border: 3px solid #4CAF50;\n        }\n\n        .status-indicator.tracking {\n            background: #fff3e0;\n            color: #f57c00;\n            border: 3px solid #FF9800;\n            animation: pulse 2s infinite;\n        }\n\n        @keyframes pulse {\n            0% { transform: scale(1); }\n            50% { transform: scale(1.05); }\n            100% { transform: scale(1); }\n        }\n\n        .trip-info {\n            display: grid;\n            grid-template-columns: 1fr 1fr;\n            gap: 15px;\n            margin: 20px 0;\n        }\n\n        .info-item {\n            text-align: center;\n            padding: 15px;\n            background: rgba(255, 255, 255, 0.7);\n            border-radius: 10px;\n        }\n\n        .info-label {\n            font-size: 0.8rem;\n            color: #666;\n            margin-bottom: 5px;\n        }\n\n        .info-value {\n            font-size: 1.1rem;\n            font-weight: 600;\n            color: #333;\n        }\n\n        .main-button {\n            width: 100%;\n            padding: 15px 20px;\n            border: none;\n            border-radius: 12px;\n            font-size: 1rem;\n            font-weight: 600;\n            cursor: pointer;\n            transition: all 0.3s ease;\n            margin-bottom: 15px;\n        }\n\n        .start-button {\n            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);\n            color: white;\n        }\n\n        .start-button:hover {\n            transform: translateY(-2px);\n            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.3);\n        }\n\n        .stop-button {\n            background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);\n            color: white;\n        }\n\n        .stop-button:hover {\n            transform: translateY(-2px);\n            box-shadow: 0 8px 25px rgba(244, 67, 54, 0.3);\n        }\n\n        .demo-buttons {\n            display: grid;\n            grid-template-columns: 1fr 1fr;\n            gap: 10px;\n            margin-top: 20px;\n        }\n\n        .demo-btn {\n            padding: 12px;\n            border: 1px solid #667eea;\n            border-radius: 8px;\n            background: white;\n            color: #667eea;\n            font-size: 0.9rem;\n            font-weight: 500;\n            cursor: pointer;\n            transition: all 0.3s ease;\n        }\n\n        .demo-btn:hover {\n            background: #667eea;\n            color: white;\n        }\n\n        .trip-history {\n            margin-top: 20px;\n        }\n\n        .history-item {\n            background: white;\n            border-radius: 10px;\n            padding: 15px;\n            margin-bottom: 10px;\n            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n            display: flex;\n            align-items: center;\n            gap: 15px;\n        }\n\n        .mode-icon {\n            width: 40px;\n            height: 40px;\n            border-radius: 20px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-size: 1.2rem;\n            color: white;\n        }\n\n        .mode-walking { background: #4CAF50; }\n        .mode-cycling { background: #FF9800; }\n        .mode-driving { background: #2196F3; }\n        .mode-bus { background: #9C27B0; }\n        .mode-train { background: #607D8B; }\n\n        .trip-details {\n            flex: 1;\n        }\n\n        .trip-mode {\n            font-weight: 600;\n            color: #333;\n            margin-bottom: 5px;\n        }\n\n        .trip-meta {\n            font-size: 0.8rem;\n            color: #666;\n        }\n\n        .features-grid {\n            display: grid;\n            grid-template-columns: 1fr 1fr;\n            gap: 15px;\n            margin-top: 20px;\n        }\n\n        .feature-card {\n            background: white;\n            border-radius: 10px;\n            padding: 15px;\n            text-align: center;\n            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n        }\n\n        .feature-card i {\n            font-size: 1.5rem;\n            color: #667eea;\n            margin-bottom: 8px;\n        }\n\n        .feature-title {\n            font-size: 0.9rem;\n            font-weight: 600;\n            color: #333;\n            margin-bottom: 5px;\n        }\n\n        .feature-desc {\n            font-size: 0.8rem;\n            color: #666;\n        }\n\n        .notification {\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            background: #4CAF50;\n            color: white;\n            padding: 15px 20px;\n            border-radius: 10px;\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n            transform: translateX(300px);\n            opacity: 0;\n            transition: all 0.3s ease;\n        }\n\n        .notification.show {\n            transform: translateX(0);\n            opacity: 1;\n        }\n\n        .loading {\n            display: inline-block;\n            width: 20px;\n            height: 20px;\n            border: 3px solid rgba(255, 255, 255, 0.3);\n            border-radius: 50%;\n            border-top-color: #fff;\n            animation: spin 1s ease-in-out infinite;\n            margin-left: 10px;\n        }\n\n        @keyframes spin {\n            to { transform: rotate(360deg); }\n        }\n\n        .timer {\n            font-family: 'Courier New', monospace;\n            font-size: 1.2rem;\n            font-weight: bold;\n            color: #333;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"phone-container\">\n        <div class=\"phone-screen\">\n            <div class=\"status-bar\">\n                <div>9:41 AM</div>\n                <div>NATPAC Survey</div>\n                <div>100% ðŸ“¶</div>\n            </div>\n            \n            <div class=\"app-content\">\n                <div class=\"logo-section\">\n                    <i class=\"fas fa-route\"></i>\n                    <h1>NATPAC Travel Survey</h1>\n                    <p>Smart India Hackathon 2025</p>\n                </div>\n\n                <div class=\"trip-card\">\n                    <div class=\"trip-status\">\n                        <div class=\"status-indicator ready\" id=\"statusIndicator\">\n                            <i class=\"fas fa-location-arrow\" id=\"statusIcon\"></i>\n                        </div>\n                        <div id=\"statusText\">Ready to track your trip</div>\n                    </div>\n\n                    <div class=\"trip-info\" id=\"tripInfo\" style=\"display: none;\">\n                        <div class=\"info-item\">\n                            <div class=\"info-label\">Duration</div>\n                            <div class=\"info-value timer\" id=\"tripTimer\">00:00</div>\n                        </div>\n                        <div class=\"info-item\">\n                            <div class=\"info-label\">Points</div>\n                            <div class=\"info-value\" id=\"locationCount\">0</div>\n                        </div>\n                    </div>\n\n                    <button class=\"main-button start-button\" id=\"mainButton\" onclick=\"toggleTrip()\">\n                        <i class=\"fas fa-play\"></i> Start Trip Tracking\n                    </button>\n                    \n                    <div class=\"demo-buttons\">\n                        <button class=\"demo-btn\" onclick=\"demoWalking()\">\n                            <i class=\"fas fa-walking\"></i> Demo Walking\n                        </button>\n                        <button class=\"demo-btn\" onclick=\"demoCycling()\">\n                            <i class=\"fas fa-bicycle\"></i> Demo Cycling\n                        </button>\n                        <button class=\"demo-btn\" onclick=\"demoCar()\">\n                            <i class=\"fas fa-car\"></i> Demo Car\n                        </button>\n                        <button class=\"demo-btn\" onclick=\"demoKerala()\">\n                            <i class=\"fas fa-ship\"></i> Demo Kerala\n                        </button>\n                    </div>\n                </div>\n\n                <div class=\"features-grid\">\n                    <div class=\"feature-card\">\n                        <i class=\"fas fa-brain\"></i>\n                        <div class=\"feature-title\">AI Classification</div>\n                        <div class=\"feature-desc\">97.8% Accuracy</div>\n                    </div>\n                    <div class=\"feature-card\">\n                        <i class=\"fas fa-shield-alt\"></i>\n                        <div class=\"feature-title\">Privacy First</div>\n                        <div class=\"feature-desc\">Secure & Private</div>\n                    </div>\n                    <div class=\"feature-card\">\n                        <i class=\"fas fa-battery-three-quarters\"></i>\n                        <div class=\"feature-title\">Battery Optimized</div>\n                        <div class=\"feature-desc\">&lt;5% Usage</div>\n                    </div>\n                    <div class=\"feature-card\">\n                        <i class=\"fas fa-map-marked-alt\"></i>\n                        <div class=\"feature-title\">Kerala Specific</div>\n                        <div class=\"feature-desc\">Local Transport</div>\n                    </div>\n                </div>\n\n                <div class=\"trip-history\" id=\"tripHistory\">\n                    <!-- Trip history will be populated here -->\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"notification\" id=\"notification\"></div>\n\n    <script>\n        // App state\n        let isTracking = false;\n        let tripStartTime = null;\n        let timerInterval = null;\n        let locationCount = 0;\n        let tripHistory = [];\n\n        // Initialize app\n        document.addEventListener('DOMContentLoaded', function() {\n            loadTripHistory();\n        });\n\n        // Main trip toggle function\n        function toggleTrip() {\n            if (isTracking) {\n                stopTrip();\n            } else {\n                startTrip();\n            }\n        }\n\n        // Start trip tracking\n        function startTrip() {\n            isTracking = true;\n            tripStartTime = Date.now();\n            locationCount = 0;\n\n            // Update UI\n            const statusIndicator = document.getElementById('statusIndicator');\n            const statusIcon = document.getElementById('statusIcon');\n            const statusText = document.getElementById('statusText');\n            const mainButton = document.getElementById('mainButton');\n            const tripInfo = document.getElementById('tripInfo');\n\n            statusIndicator.className = 'status-indicator tracking';\n            statusIcon.className = 'fas fa-location-dot';\n            statusText.textContent = 'Tracking your trip...';\n            mainButton.className = 'main-button stop-button';\n            mainButton.innerHTML = '<i class=\"fas fa-stop\"></i> Stop Trip';\n            tripInfo.style.display = 'grid';\n\n            // Start timer\n            timerInterval = setInterval(updateTimer, 1000);\n\n            // Simulate location points\n            simulateLocationTracking();\n\n            showNotification('Trip tracking started!', 'success');\n        }\n\n        // Stop trip tracking\n        async function stopTrip() {\n            isTracking = false;\n            const duration = Date.now() - tripStartTime;\n\n            // Update UI\n            const statusIndicator = document.getElementById('statusIndicator');\n            const statusIcon = document.getElementById('statusIcon');\n            const statusText = document.getElementById('statusText');\n            const mainButton = document.getElementById('mainButton');\n            const tripInfo = document.getElementById('tripInfo');\n\n            statusIndicator.className = 'status-indicator ready';\n            statusIcon.className = 'fas fa-location-arrow';\n            statusText.textContent = 'Processing trip data...';\n            mainButton.innerHTML = '<i class=\"fas fa-spinner fa-spin\"></i> Analyzing...';\n            mainButton.disabled = true;\n\n            // Stop timer\n            clearInterval(timerInterval);\n\n            // Simulate trip classification\n            try {\n                const result = await classifyTrip(duration);\n                \n                // Add to trip history\n                const trip = {\n                    id: Date.now(),\n                    mode: result.mode,\n                    confidence: result.confidence,\n                    duration: duration,\n                    locations: locationCount,\n                    timestamp: Date.now()\n                };\n                \n                tripHistory.unshift(trip);\n                saveTripHistory();\n                renderTripHistory();\n                \n                showNotification(`Trip classified as ${result.mode} (${(result.confidence * 100).toFixed(1)}% confidence)`, 'success');\n                \n            } catch (error) {\n                showNotification('Classification failed. Using local analysis.', 'warning');\n            }\n\n            // Reset UI\n            setTimeout(() => {\n                statusText.textContent = 'Ready to track your trip';\n                mainButton.className = 'main-button start-button';\n                mainButton.innerHTML = '<i class=\"fas fa-play\"></i> Start Trip Tracking';\n                mainButton.disabled = false;\n                tripInfo.style.display = 'none';\n            }, 2000);\n        }\n\n        // Update trip timer\n        function updateTimer() {\n            if (tripStartTime) {\n                const elapsed = Math.floor((Date.now() - tripStartTime) / 1000);\n                const minutes = Math.floor(elapsed / 60);\n                const seconds = elapsed % 60;\n                document.getElementById('tripTimer').textContent = \n                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n            }\n        }\n\n        // Simulate location tracking\n        function simulateLocationTracking() {\n            const locationInterval = setInterval(() => {\n                if (!isTracking) {\n                    clearInterval(locationInterval);\n                    return;\n                }\n                locationCount++;\n                document.getElementById('locationCount').textContent = locationCount;\n            }, 3000); // Add point every 3 seconds\n        }\n\n        // Classify trip using backend API\n        async function classifyTrip(duration) {\n            const response = await axios.post('http://localhost:4001/api/demo-classify', {\n                tripType: 'mixed'\n            });\n            \n            if (response.data.success) {\n                return {\n                    mode: response.data.prediction.mode,\n                    confidence: response.data.prediction.confidence\n                };\n            } else {\n                throw new Error('Classification failed');\n            }\n        }\n\n        // Demo functions\n        async function demoWalking() {\n            showNotification('Testing walking classification...', 'info');\n            try {\n                const response = await axios.post('http://localhost:4001/api/demo-classify', {\n                    tripType: 'walk'\n                });\n                showDemoResult('Walking', response.data.prediction);\n            } catch (error) {\n                showNotification('Demo failed - backend offline', 'error');\n            }\n        }\n\n        async function demoCycling() {\n            showNotification('Testing cycling classification...', 'info');\n            try {\n                const response = await axios.post('http://localhost:4001/api/demo-classify', {\n                    tripType: 'bicycle'\n                });\n                showDemoResult('Cycling', response.data.prediction);\n            } catch (error) {\n                showNotification('Demo failed - backend offline', 'error');\n            }\n        }\n\n        async function demoCar() {\n            showNotification('Testing car classification...', 'info');\n            try {\n                const response = await axios.post('http://localhost:4001/api/demo-classify', {\n                    tripType: 'car'\n                });\n                showDemoResult('Car', response.data.prediction);\n            } catch (error) {\n                showNotification('Demo failed - backend offline', 'error');\n            }\n        }\n\n        async function demoKerala() {\n            showNotification('Testing Kerala route (Kochi to Airport)...', 'info');\n            try {\n                const response = await axios.post('http://localhost:4001/api/classify', {\n                    locations: [\n                        { latitude: 9.9312, longitude: 76.2673, timestamp: Date.now() - 1800000 },\n                        { latitude: 10.0150, longitude: 76.2911, timestamp: Date.now() }\n                    ],\n                    duration: 1800000,\n                    metadata: { keralaRoute: true }\n                });\n                showDemoResult('Kerala Route', response.data.prediction);\n            } catch (error) {\n                showNotification('Demo failed - backend offline', 'error');\n            }\n        }\n\n        // Show demo result\n        function showDemoResult(type, prediction) {\n            const confidence = (prediction.confidence * 100).toFixed(1);\n            showNotification(`${type} â†’ ${prediction.mode} (${confidence}% confidence)`, 'success');\n            \n            // Add demo trip to history\n            const demoTrip = {\n                id: Date.now(),\n                mode: prediction.mode,\n                confidence: prediction.confidence,\n                duration: Math.floor(Math.random() * 1800000) + 600000, // 10-40 min\n                locations: Math.floor(Math.random() * 50) + 10,\n                timestamp: Date.now(),\n                demo: true\n            };\n            \n            tripHistory.unshift(demoTrip);\n            saveTripHistory();\n            renderTripHistory();\n        }\n\n        // Show notification\n        function showNotification(message, type = 'info') {\n            const notification = document.getElementById('notification');\n            notification.textContent = message;\n            notification.className = `notification show ${type}`;\n            \n            setTimeout(() => {\n                notification.className = 'notification';\n            }, 3000);\n        }\n\n        // Render trip history\n        function renderTripHistory() {\n            const historyContainer = document.getElementById('tripHistory');\n            \n            if (tripHistory.length === 0) {\n                historyContainer.innerHTML = '';\n                return;\n            }\n            \n            const historyHtml = tripHistory.slice(0, 5).map(trip => {\n                const modeIcons = {\n                    walking: 'fas fa-walking',\n                    cycling: 'fas fa-bicycle',\n                    driving: 'fas fa-car',\n                    bus: 'fas fa-bus',\n                    train: 'fas fa-train'\n                };\n                \n                const modeClasses = {\n                    walking: 'mode-walking',\n                    cycling: 'mode-cycling',\n                    driving: 'mode-driving',\n                    bus: 'mode-bus',\n                    train: 'mode-train'\n                };\n                \n                const duration = Math.floor(trip.duration / 60000);\n                const confidence = (trip.confidence * 100).toFixed(0);\n                const timeAgo = Math.floor((Date.now() - trip.timestamp) / 60000);\n                \n                return `\n                    <div class=\"history-item\">\n                        <div class=\"mode-icon ${modeClasses[trip.mode] || 'mode-walking'}\">\n                            <i class=\"${modeIcons[trip.mode] || 'fas fa-question'}\"></i>\n                        </div>\n                        <div class=\"trip-details\">\n                            <div class=\"trip-mode\">${trip.mode.charAt(0).toUpperCase() + trip.mode.slice(1)} ${trip.demo ? '(Demo)' : ''}</div>\n                            <div class=\"trip-meta\">${duration}min â€¢ ${confidence}% confidence â€¢ ${timeAgo}min ago</div>\n                        </div>\n                    </div>\n                `;\n            }).join('');\n            \n            historyContainer.innerHTML = historyHtml;\n        }\n\n        // Local storage functions\n        function saveTripHistory() {\n            localStorage.setItem('tripHistory', JSON.stringify(tripHistory));\n        }\n\n        function loadTripHistory() {\n            const saved = localStorage.getItem('tripHistory');\n            if (saved) {\n                tripHistory = JSON.parse(saved);\n                renderTripHistory();\n            }\n        }\n    </script>\n</body>\n</html>